<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/webjars/bootstrap/4.5.0/css/bootstrap.min.css">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.15.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.7.14/js/bootstrap-datetimepicker.min.js"></script>
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.7.14/css/bootstrap-datetimepicker.min.css">
    <script src="/webjars/bootstrap/4.5.0/js/bootstrap.min.js"></script>

    <link th:href="@{/css/adding_form.css}" type="text/css" rel="stylesheet">
    <link th:href="@{/css/index.css}" type="text/css" rel="stylesheet">
</head>

<body>

<section class="search-banner bg-danger text-white py-5" id="search-banner">
    <div class="container py-5 my-5">

        <div class="card">
            <div class="card-body">
                <form method="get" action="/admin/employee/search">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="row text-center pb-4">
                                <div class="col-md-4" style="color:#343a40">
                                    <h4>Фамилия</h4>
                                </div>
                                <div class="col-md-4" style="color:#343a40">
                                    <h4>Имя</h4>
                                </div>
                                <div class="col-md-4" style="color:#343a40">
                                    <h4>Отчество</h4>
                                </div>
                            </div>
                            <div class="row text-center pb-4">
                                <div class="col-md-4">
                                    <div class="input-group">
                                        <input
                                                type="text"
                                                class="form-control"
                                                name="searchSurname"
                                                th:value="${searchSurname}"
                                        >
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="input-group">
                                        <input
                                                type="text"
                                                class="form-control"
                                                name="searchName"
                                                th:value="${searchName}"
                                        >
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="input-group">
                                        <input
                                                type="text"
                                                class="form-control"
                                                name="searchPatronymic"
                                                th:value="${searchPatronymic}"
                                        >
                                    </div>
                                </div>
                            </div>


                            <div class="row text-center pb-4">
                                <div class="col-md-4" style="color:#343a40">
                                    <h4>Дата рождения</h4>
                                </div>
                                <div class="col-md-4" style="color:#343a40">
                                    <h4>Дата приёма на работу</h4>
                                </div>
                                <div class="col-md-4" style="color:#343a40">
                                    <h4>Должность</h4>
                                </div>
                            </div>
                            <div class="row text-center pb-4">
                                <div class="col-md-4">
                                    <div class="input-group">
                                        <input
                                                type="date"
                                                class="form-control"
                                                name="searchDateBirthday"
                                                th:value="${searchDateBirthday}"
                                        >
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="input-group">
                                        <input
                                                type="date"
                                                class="form-control"
                                                name="searchDateBirthday"
                                                th:value="${searchDateStartPosition}"
                                        >
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="input-group">
                                        <select id="searchIdPosition" name="searchIdPosition" class="form-control">
                                            <option th:each="position : ${positions}"
                                                    th:text="${position.name}"
                                                    th:value="${position.id}"
                                            ></option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <hr>
                            <div class="row text-center pb-4">
                                <div class="col-md-6"></div>
                                <div class="col-md-2">

                                </div>
                                <div class="col-md-2">
                                    <a type="button" class="btn btn-dark w-100" href="/admin/employee">Сбросить</a>
                                </div>
                                <div class="col-md-2">
                                    <button type="submit" class="btn btn-dark w-100">Поиск</button>
                                </div>

                            </div>

                        </div>

                    </div>
                </form>
            </div>
        </div>
    </div>
</section>
<button class="btn btn-dark w-100" id="openForm" onclick="openForm()">Добавить</button>


<div class="form-popup" id="myForm">
    <form method="post" th:action="@{/admin/employee/addEmployee}" class="form-container" th:object="${employee}">
        <div class="row">
            <div class="col-md-12">
                <div class="row m-1">
                    <label>
                        <b>Фамилия</b>
                    </label>
                </div>
                <div class="row m-1">
                    <input
                            required
                            type="text"
                            placeholder="Введите Фамилию"
                            name="surname"
                    >
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="row m-1">
                    <label>
                        <b>Имя</b>
                    </label>
                </div>
                <div class="row m-1">
                    <input
                            required
                            type="text"
                            placeholder="Введите Фамилию"
                            name="name"
                    >
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="row m-1">
                    <label>
                        <b>Отчество</b>
                    </label>
                </div>
                <div class="row m-1">
                    <input
                            type="text"
                            placeholder="Введите отчество"
                            name="patronymic"
                    >
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="row m-1">
                    <label>
                        <b>Дата рождения</b>
                    </label>
                </div>
                <div class="row m-1">
                    <input
                            required
                            type="date"
                            placeholder="Введите дату"
                            name="dateBirthday"
                    >
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="row m-1">
                    <label>
                        <b>Дата начала работы</b>
                    </label>
                </div>
                <div class="row m-1">
                    <input
                            required
                            type="date"
                            placeholder="Введите дату"
                            name="dateStartPosition"
                    >
                </div>
            </div>
        </div>

        <div class="form-group">
            <label for="position">Должность</label>
            <select id="position" name="position" th:field="*{position}" class="form-control">
                <option th:each="position : ${positions}"
                        th:text="${position.name}"
                        th:value="${position.id}"
                ></option>
            </select>
        </div>

        <button type="submit" class="btn">Создать работника</button>
        <button type="button" class="btn cancel" onclick="closeForm()">Закрыть</button>
    </form>
</div>

<table border="1px solid" class="table">
    <tr>
        <th>ID сотрудника</th>
        <th>Фамилия</th>
        <th>Имя</th>
        <th>Отчество</th>
        <th>Дата рождения</th>
        <th>Дата начала работы</th>
        <th>Id позиции</th>
        <th></th>
    </tr>
    <tr th:each="employee : ${employees}">
        <td th:text="${employee.getIdEmployee()}"></td>
        <td th:text="${employee.getSurname()}"></td>
        <td th:text="${employee.getName()}"></td>
        <td th:text="${employee.getPatronymic()}"></td>
        <td th:text="${employee.getDateBirthday()}"></td>
        <td th:text="${employee.getDateStartPosition()}"></td>
        <td th:text="${employee.getPosition().getName}"></td>
        <td>
            <a
                    href="#"
                    th:attr="onclick=|deleteEmployee('/admin/employee/delete/' + ${employee.idEmployee})|"
            >
                удалить
            </a>
        </td>
    </tr>
</table>


<script>
    function openForm() {
        document.getElementById("myForm").style.display = "block";
    }

    function closeForm() {
        document.getElementById("myForm").style.display = "none";
    }

    function deleteEmployee(path) {
        let isOk = confirm("Вы действительно хотите удалить сотрудника?");

        if (isOk) document.location.href = path;
    }
</script>
</body>
</html>